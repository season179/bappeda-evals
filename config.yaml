# RAG Evaluation Configuration
# =============================

# OpenRouter API Configuration
api:
  base_url: "https://openrouter.ai/api/v1"
  # API key should be set in .env file as OPENROUTER_API_KEY

# LLM Configuration (Generator)
llm:
  model: "x-ai/grok-code-fast-1"
  # model: "google/gemini-2.5-flash"
  temperature: 0.7
  max_tokens: null  # null = model default

# Embeddings Configuration
embeddings:
  # IMPORTANT: Must use qwen/qwen3-embedding-8b per user requirement
  model: "qwen/qwen3-embedding-8b"

# Knowledge Base Configuration
knowledge_base:
  directory: "./knowledge-files"
  glob_pattern: "**/*.md"
  # File extensions to include
  extensions:
    - ".md"
    - ".txt"

# Translation Configuration
translation:
  # Model for translating user_input from English to Indonesian
  model: "x-ai/grok-code-fast-1"
  temperature: 0.3  # Lower = more consistent translations
  max_tokens: 500

# Multi-Hop Query Generation Configuration
multihop:
  # Number of multi-hop queries to generate
  test_size: 100  # Testing with small sample first

  # Language for query generation
  language: "id"  # Bahasa Indonesia

  # Knowledge graph configuration
  overlap_threshold: 0.6  # Minimum keyphrase overlap for relationships (0.0-1.0)

  # Document chunking configuration
  chunk_size:
    min: 300   # Minimum tokens per chunk
    max: 1000  # Maximum tokens per chunk

  # Keyphrase extraction configuration
  max_keyphrases: 10  # Maximum keyphrases to extract per document

  # DKI Jakarta Provincial Government Worker Personas
  # These personas represent different roles in the provincial government
  personas:
    - name: "Perencana Pembangunan Daerah"
      role: "Staf Bappeda DKI Jakarta yang bertanggung jawab atas penyusunan RPJMD dan RKPD"

    - name: "Analis Anggaran Daerah"
      role: "Pegawai Badan Pengelola Keuangan Daerah yang menganalisis alokasi anggaran pembangunan"

    - name: "Kepala Seksi Perencanaan"
      role: "Pejabat di Bappeda yang mengawasi implementasi kebijakan perencanaan daerah"

    - name: "Peneliti Kebijakan Publik"
      role: "Staff ahli yang mengevaluasi efektivitas peraturan daerah dan program pembangunan"

    - name: "Koordinator Program Pembangunan"
      role: "Pengelola program yang mengoordinasikan pelaksanaan berbagai kegiatan pembangunan daerah"

# Output Configuration
output:
  partial_file: "testset_partial.csv"
  final_file: "testset_final.csv"
  backup_enabled: true

# Checkpointing Configuration
checkpoint:
  enabled: true
  file: "checkpoint.json"
  # Save checkpoint after every N samples
  save_every_n_samples: 10
  # Save checkpoint after each document
  save_every_document: true

# Progress Tracking Configuration
progress:
  enabled: true
  file: "progress_summary.json"
  # Update progress file every N seconds
  update_interval: 30

# Logging Configuration
logging:
  directory: "logs"
  # Console log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  console_level: "INFO"
  # File log level
  file_level: "DEBUG"
  # Enable separate API call log
  api_log_enabled: true
  # Enable separate error log
  error_log_enabled: true

# API Validation Configuration
validation:
  # Run pre-flight API validation before generation
  enabled: true
  # Fail fast on validation errors
  fail_fast: true

# RAG Executor Configuration
rag_executor:
  # SmartKnowledge API endpoint
  api_base_url: "http://localhost:3000"

  # Request configuration
  timeout_seconds: 120
  max_retries: 3
  retry_delay_seconds: 2

  # Output configuration
  results_dir: "./results"
  output_file: "eval_results.jsonl"

  # Checkpoint configuration
  checkpoint_enabled: true
  checkpoint_file: "executor_checkpoint.json"
  checkpoint_interval: 10  # Save every N queries
